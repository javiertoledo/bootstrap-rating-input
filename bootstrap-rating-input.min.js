(function(e){e.fn.rating=function(){function n(t,n){var r=e(t),i=r.attr("data-icon")||"icon-star",s=r.attr("data-icon-empty")||"icon-star-empty",o=r.find("i[data-value="+n+"]");o.removeClass(s).addClass(i);o.prevAll("i").removeClass(s).addClass(i);o.nextAll("i").removeClass(i).addClass(s)}function r(t){var n=e(t),r=n.attr("data-icon")||"icon-star",i=n.attr("data-icon-empty")||"icon-star-empty";n.find("i").removeClass(r).addClass(i);n.find(".rating-clear").hide();n.find("input").val("").trigger("change")}var t;for(t=this.length-1;t>=0;t--){var i,s,o,u=e(this[t]),a=u.data("max")||5,f=u.data("min")||0,l=u.data("clearable")||null,c="";var h=u.attr("data-icon")||"icon-star";var p=u.attr("data-icon-empty")||"icon-star-empty";for(s=f;s<=a;s++){c+=['<i class="'+p+'" data-value="',s,'"></i>'].join("")}if(l){c+=[' <a class="rating-clear" style="display:none;" href="javascript:void"><i class="icon-remove"></i> ',l,"</a>"].join("")}i=['<div class="rating-input" data-icon="'+h+'" data-icon-empty="'+p+'">',c,'<input type="hidden" name="',u.attr("name"),'" value="',u.val(),'" id="',u.attr("id"),'" />',"</div>"].join("");u.replaceWith(i)}e(".rating-input").on("mouseenter","i",function(){var t=e(this);n(t.parent(),t.data("value"))}).on("mouseleave","i",function(){var t=e(this);var i=t.siblings("input").val();if(i){n(t.parent(),i)}else{r(t.parent())}}).on("click","i",function(){var t=e(this);var n=t.data("value");t.siblings("input").val(n).trigger("change");t.siblings(".rating-clear").show()}).on("click",".rating-clear",function(){r(e(this).parent())}).each(function(){var t=e(this).find("input").val();if(t){n(this,t);e(this).find(".rating-clear").show()}})};e(function(){if(e("input.rating[type=number]").length>0){e("input.rating[type=number]").rating()}})})(jQuery)